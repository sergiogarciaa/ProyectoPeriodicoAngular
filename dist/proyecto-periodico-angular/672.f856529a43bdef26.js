"use strict";(self.webpackChunkProyectoPeriodicoAngular=self.webpackChunkProyectoPeriodicoAngular||[]).push([[672],{9672:(X,h,c)=>{c.r(h),c.d(h,{PeriodistaModule:()=>M});var p=c(6814),s=c(9692),r=c(5879);let k=(()=>{class i{static#r=this.\u0275fac=function(e){return new(e||i)};static#t=this.\u0275cmp=r.Xpm({type:i,selectors:[["app-periodista"]],decls:1,vars:0,template:function(e,o){1&e&&r._UZ(0,"router-outlet")},dependencies:[s.lC]})}return i})();var a=c(95),_=c(3519),d=c.n(_),x=c(4004),v=c(2253),m=c(8215),f=c(5449),y=c(7056);function Z(i,u){if(1&i&&(r.TgZ(0,"option",29),r._uU(1),r.qZA()),2&i){const t=u.$implicit;r.Q6J("value",t.tipo),r.xp6(1),r.Oqu(t.tipo)}}let A=(()=>{class i{constructor(t,e,o,n,l,g){this.noticiasService=t,this.router=e,this.route=o,this.baseDatos=n,this.auth=l,this.categoriasServicio=g,this.categorias=[],this.formularioNoticia=new a.cw({titulo:new a.NI("",a.kI.required),cuerpo:new a.NI("",a.kI.required),autor:new a.NI("",a.kI.required),categoria:new a.NI("",a.kI.required)})}ngOnInit(){this.obtenerCategorias(),console.log(this.categorias),this.route.params.subscribe(t=>{this.idUsuario=t.id,this.idUsuario&&this.baseDatos.obtenerPorId("usuarios",this.idUsuario).subscribe(e=>{e&&this.formularioNoticia.controls.autor.setValue(e.nombre)})})}obtenerCategorias(){this.categoriasServicio.obtenerTodasCategorias().subscribe(t=>{this.categorias=t},t=>{console.error("Error al obtener las categor\xedas:",t)})}crearNoticia(){if(this.formularioNoticia.valid){const t=(0,x.Z)();this.noticiasService.crearNoticia({id:t,titulo:this.formularioNoticia.value.titulo,cuerpo:this.formularioNoticia.value.cuerpo,autor:this.formularioNoticia.value.autor,idAutor:this.idUsuario,categoria:this.formularioNoticia.value.categoria}).then(()=>{this.router.navigate(["/principal/dashboard"]),d().fire("Noticia creada","","success")}).catch(n=>{console.error("Error al crear la noticia:",n),d().fire("Error","Ocurri\xf3 un error al crear la noticia","error")})}else d().fire("Error","Por favor completa todos los campos","error")}logOut(){this.auth.logout()}static#r=this.\u0275fac=function(e){return new(e||i)(r.Y36(v.D),r.Y36(s.F0),r.Y36(s.gz),r.Y36(m.g),r.Y36(f.e),r.Y36(y.g))};static#t=this.\u0275cmp=r.Xpm({type:i,selectors:[["app-crear-noticia"]],decls:49,vars:2,consts:[[1,"bg-gray-50","dark:bg-gray-900","h-screen","text-white"],[1,"flex","justify-between","pl-10"],[1,"justify-center","flex"],[1,"h-auto","text-3xl","text-gray-900","dark:text-gray-50","pt-4"],[1,"flex","justify-end","py-2","pr-5","gap-5"],["routerLink","/periodista/administrar-categorias",1,"w-34","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800","flex"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","me-2"],["stroke-linecap","round","stroke-linejoin","round","d","M21.75 6.75a4.5 4.5 0 0 1-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 1 1-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 0 1 6.336-4.486l-3.276 3.276a3.004 3.004 0 0 0 2.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852Z"],["stroke-linecap","round","stroke-linejoin","round","d","M4.867 19.125h.008v.008h-.008v-.008Z"],["routerLink","/periodista/administrar-noticias",1,"w-32","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800","flex"],["routerLink","/principal/dashboard",1,"w-32","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",2,"height","40px"],[1,"w-28","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",2,"height","40px",3,"click"],[1,"custom-form",2,"padding-top","5%",3,"formGroup","ngSubmit"],[1,"flex","flex-col","items-center","justify-center","px-6","pt-8","mx-auto","lg:py-0"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white"],[1,"w-full","bg-white","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"space-y-4","md:space-y-6"],["for","titulo",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","titulo","id","titulo","formControlName","titulo","placeholder","","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","cuerpo",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","cuerpo","id","cuerpo","formControlName","cuerpo","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","h-40","resize-none","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","categoria",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","categoria","id","categoria","formControlName","categoria","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","autor",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","autor","id","autor","formControlName","autor","readonly","","placeholder","","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit",1,"w-full","text-white","bg-blue-600","hover:bg-blue-700","focus:ring-4","focus:outline-none","focus:ring-primary-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-primary-800"],[3,"value"]],template:function(e,o){1&e&&(r.TgZ(0,"main",0)(1,"div",1)(2,"div",2)(3,"h2",3),r._uU(4,"Administracion"),r.qZA()(),r.TgZ(5,"div",4)(6,"a",5),r.O4$(),r.TgZ(7,"svg",6),r._UZ(8,"path",7)(9,"path",8),r.qZA(),r._uU(10," Categor\xedas"),r.qZA(),r.kcU(),r.TgZ(11,"a",9),r.O4$(),r.TgZ(12,"svg",6),r._UZ(13,"path",7)(14,"path",8),r.qZA(),r._uU(15," Noticias"),r.qZA(),r.kcU(),r.TgZ(16,"a",10),r._uU(17,"Volver"),r.qZA(),r.TgZ(18,"button",11),r.NdJ("click",function(){return o.logOut()}),r._uU(19,"Salir"),r.qZA()()(),r._UZ(20,"hr"),r.TgZ(21,"form",12),r.NdJ("ngSubmit",function(){return o.crearNoticia()}),r.TgZ(22,"div",13)(23,"h1",14),r._uU(24," Crear Noticia "),r.qZA(),r.TgZ(25,"div",15)(26,"div",16)(27,"div",17)(28,"div")(29,"label",18),r._uU(30,"T\xedtulo"),r.qZA(),r._UZ(31,"input",19),r.qZA(),r.TgZ(32,"div")(33,"label",20),r._uU(34,"Cuerpo"),r.qZA(),r._UZ(35,"textarea",21),r.qZA(),r.TgZ(36,"div")(37,"label",22),r._uU(38,"Categor\xeda"),r.qZA(),r.TgZ(39,"select",23)(40,"option",24),r._uU(41,"Seleccionar categor\xeda"),r.qZA(),r.YNc(42,Z,2,2,"option",25),r.qZA()(),r.TgZ(43,"div")(44,"label",26),r._uU(45,"Autor"),r.qZA(),r._UZ(46,"input",27),r.qZA(),r.TgZ(47,"button",28),r._uU(48," Crear Noticia "),r.qZA()()()()()()()),2&e&&(r.xp6(21),r.Q6J("formGroup",o.formularioNoticia),r.xp6(21),r.Q6J("ngForOf",o.categorias))},dependencies:[p.sg,s.rH,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.sg,a.u]})}return i})();var w=c(5861),C=c(1374);const b=function(){var i=(0,w.Z)(function*(u,t){const e=(0,r.f3M)(f.e),o=(0,r.f3M)(s.F0),n=(0,r.f3M)(m.g);try{const l=yield e.obtenerUsuarioActual();if(console.log("Usuario actual en Firestore:",l),l){const g=yield n.obtenerPorFiltro("usuarios","email",l.email).pipe((0,C.P)()).toPromise();return console.log("Usuario encontrado en Firestore:",g),g.length>0&&"Periodista"===g[0].rol||"Admin"===g[0].rol?(console.log("Acceso permitido"),!0):(console.log("Acceso denegado"),o.navigate(["/principal/dashboard"]),!1)}return console.log("No hay usuario actual en Firestore"),o.navigate(["/principal/login"]),!1}catch(l){return console.error("Error al obtener el usuario actual:",l),!1}});return function(t,e){return i.apply(this,arguments)}}();let T=(()=>{class i{constructor(t,e,o){this.baseDatos=t,this.router=e,this.auth=o,this.formularioCategoria=new a.cw({descripcion:new a.NI("",a.kI.required),tipo:new a.NI("",a.kI.required)})}ngOnInit(){}crearCategoria(){if(this.formularioCategoria.valid){const e={id:(0,x.Z)(),descripcion:this.formularioCategoria.value.descripcion,tipo:this.formularioCategoria.value.tipo};this.baseDatos.insertar("categorias",e).then(()=>{this.router.navigate(["/periodista/administrar-categorias"]),d().fire("Categor\xeda creada","","success")}).catch(o=>{console.error("Error al crear la categor\xeda:",o),d().fire("Error","Ocurri\xf3 un error al crear la categor\xeda","error")})}else d().fire("Error","Por favor completa todos los campos","error")}logOut(){this.auth.logout()}static#r=this.\u0275fac=function(e){return new(e||i)(r.Y36(m.g),r.Y36(s.F0),r.Y36(f.e))};static#t=this.\u0275cmp=r.Xpm({type:i,selectors:[["app-crear-categoria"]],decls:26,vars:1,consts:[[1,"bg-gray-50","dark:bg-gray-900","h-screen","text-white"],[1,"flex","justify-between","pt-4","pl-10"],[1,"justify-center","flex"],[1,"h-auto","text-3xl","text-gray-900","dark:text-gray-50"],[1,"flex","justify-end","py-2","pr-5","gap-5"],["routerLink","/periodista/administrar-categorias",1,"w-32","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800"],[1,"w-28","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",3,"click"],[1,"custom-form",2,"padding-top","5%",3,"formGroup","ngSubmit"],[1,"flex","flex-col","items-center","justify-center","px-6","pt-8","mx-auto","lg:py-0"],[1,"w-full","bg-white","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"space-y-4","md:space-y-6"],["for","tipo",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","tipo","id","tipo","formControlName","tipo","placeholder","","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","descripcion",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","descripcion","id","descripcion","formControlName","descripcion","placeholder","","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit",1,"w-full","text-white","bg-blue-600","hover:bg-blue-700","focus:ring-4","focus:outline-none","focus:ring-primary-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-primary-800"]],template:function(e,o){1&e&&(r.TgZ(0,"main",0)(1,"div",1)(2,"div",2)(3,"h2",3),r._uU(4,"Panel Periodista Categorias"),r.qZA()(),r.TgZ(5,"div",4)(6,"a",5),r._uU(7,"Volver"),r.qZA(),r.TgZ(8,"button",6),r.NdJ("click",function(){return o.logOut()}),r._uU(9,"Salir"),r.qZA()()(),r._UZ(10,"hr"),r.TgZ(11,"form",7),r.NdJ("ngSubmit",function(){return o.crearCategoria()}),r.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div")(17,"label",12),r._uU(18,"Tipo"),r.qZA(),r._UZ(19,"input",13),r.qZA(),r.TgZ(20,"div")(21,"label",14),r._uU(22,"Descripci\xf3n"),r.qZA(),r._UZ(23,"input",15),r.qZA(),r.TgZ(24,"button",16),r._uU(25," Crear Categor\xeda "),r.qZA()()()()()()()),2&e&&(r.xp6(11),r.Q6J("formGroup",o.formularioCategoria))},dependencies:[s.rH,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u]})}return i})();function q(i,u){if(1&i&&(r.TgZ(0,"a",24),r._uU(1," Editar "),r.qZA()),2&i){const t=r.oxw().$implicit;r.MGl("routerLink","/periodista/editar-categoria/",t.id,"")}}function N(i,u){1&i&&(r.TgZ(0,"td",20),r._uU(1," X "),r.qZA())}function U(i,u){if(1&i){const t=r.EpF();r.TgZ(0,"button",25),r.NdJ("click",function(){r.CHM(t);const o=r.oxw().$implicit,n=r.oxw(2);return r.KtG(n.eliminarCategoria(o.id))}),r._uU(1," Eliminar "),r.qZA()}}function E(i,u){if(1&i&&(r.TgZ(0,"tr",18)(1,"th",19),r._uU(2),r.qZA(),r.TgZ(3,"td",20),r._uU(4),r.qZA(),r.TgZ(5,"td",20),r.YNc(6,q,2,1,"a",21),r.qZA(),r.YNc(7,N,2,0,"ng-template",null,22,r.W1O),r.TgZ(9,"td",20),r.YNc(10,U,2,0,"button",23),r.qZA()()),2&i){const t=u.$implicit,e=r.MAs(8),o=r.oxw(2);r.xp6(2),r.Oqu(t.tipo),r.xp6(2),r.Oqu(t.descripcion),r.xp6(2),r.Q6J("ngIf","Admin"==(null==o.usuarioActual?null:o.usuarioActual.rol))("ngIfElse",e),r.xp6(4),r.Q6J("ngIf","Admin"==(null==o.usuarioActual?null:o.usuarioActual.rol))("ngIfElse",e)}}function F(i,u){if(1&i&&(r.TgZ(0,"table",14)(1,"thead",15)(2,"tr")(3,"th",16),r._uU(4,"Nombre"),r.qZA(),r.TgZ(5,"th",16),r._uU(6,"Descripci\xf3n"),r.qZA(),r.TgZ(7,"th",16),r._uU(8,"Editar"),r.qZA(),r.TgZ(9,"th",16),r._uU(10,"Eliminar"),r.qZA()()(),r.TgZ(11,"tbody"),r.YNc(12,E,11,6,"tr",17),r.qZA()()),2&i){const t=r.oxw();r.xp6(12),r.Q6J("ngForOf",t.categorias)}}let I=(()=>{class i{constructor(t,e,o){this.baseDatos=t,this.router=e,this.auth=o,this.categorias=[]}ngOnInit(){this.emailUsuarioActual=this.auth.obtenerUsuarioActual()?.email,this.usuarioActual||(console.log("Desde la bd"),this.baseDatos.obtenerPorFiltro("usuarios","email",this.emailUsuarioActual).subscribe(t=>{this.usuarioActual=t[0]})),this.obtenerCategorias()}obtenerCategorias(){this.baseDatos.obtenerTodos("categorias").subscribe(t=>{this.categorias=t})}eliminarCategoria(t){this.baseDatos.eliminar("categorias",t).then(()=>{this.categorias=this.categorias.filter(e=>e.id!==t),d().fire("Categor\xeda eliminada","","success")}).catch(e=>{console.error("Error al eliminar la categor\xeda:",e),d().fire("Error","Ocurri\xf3 un error al eliminar la categor\xeda","error")})}logOut(){this.auth.logout()}static#r=this.\u0275fac=function(e){return new(e||i)(r.Y36(m.g),r.Y36(s.F0),r.Y36(f.e))};static#t=this.\u0275cmp=r.Xpm({type:i,selectors:[["app-administrar-categorias"]],decls:20,vars:2,consts:[[1,"bg-gray-50","dark:bg-gray-900","h-screen","text-white"],[1,"flex","justify-between","pt-4","pl-10"],[1,"justify-center","flex"],[1,"h-auto","text-3xl","text-gray-900","dark:text-gray-50"],[1,"flex","justify-end","py-2","pr-5","gap-5"],[1,"w-32","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",3,"routerLink"],[1,"w-28","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",3,"click"],[1,"py-4","mt-5","flex","justify-center"],[1,"card","bg-transparent"],[1,"card-header","mb-5","flex","justify-between"],[1,"pt-4"],["routerLink","/periodista/crear-categoria",1,"bg-transparent","hover:bg-white-500","text-white-700","font-semibold","hover:text-white","py-2","px-4","border","border-blue-500","hover:border-transparent","rounded"],[1,"relative","overflow-x-auto"],["class","w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",4,"ngIf"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b dark:bg-gray-800 dark:border-gray-700",4,"ngFor","ngForOf"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-4"],["class","btn buttonPrincipal",3,"routerLink",4,"ngIf","ngIfElse"],["noEditar",""],["class","btn btn-danger",3,"click",4,"ngIf","ngIfElse"],[1,"btn","buttonPrincipal",3,"routerLink"],[1,"btn","btn-danger",3,"click"]],template:function(e,o){1&e&&(r.TgZ(0,"main",0)(1,"div",1)(2,"div",2)(3,"h2",3),r._uU(4,"Panel Periodista Categorias"),r.qZA()(),r.TgZ(5,"div",4)(6,"a",5),r._uU(7,"Volver"),r.qZA(),r.TgZ(8,"button",6),r.NdJ("click",function(){return o.logOut()}),r._uU(9,"Salir"),r.qZA()()(),r._UZ(10,"hr"),r.TgZ(11,"div",7)(12,"div",8)(13,"div",9)(14,"h3",10),r._uU(15,"Listado de categor\xedas"),r.qZA(),r.TgZ(16,"a",11),r._uU(17,"Crear Categoria"),r.qZA()(),r.TgZ(18,"div",12),r.YNc(19,F,13,1,"table",13),r.qZA()()()()),2&e&&(r.xp6(6),r.MGl("routerLink","/periodista/crear-noticia/",null==o.usuarioActual?null:o.usuarioActual.id,""),r.xp6(13),r.Q6J("ngIf",o.categorias.length>0))},dependencies:[p.sg,p.O5,s.rH]})}return i})(),O=(()=>{class i{constructor(t,e,o,n,l){this.route=t,this.baseDatosServicio=e,this.formBuilder=o,this.router=n,this.auth=l,this.formularioEditarCategoria=this.formBuilder.group({descripcion:["",a.kI.required],tipo:["",a.kI.required]})}ngOnInit(){this.route.params.subscribe(t=>{this.idCategoria=t.id,this.idCategoria&&this.baseDatosServicio.obtenerPorId("categorias",this.idCategoria).subscribe(e=>{this.categoria=e,this.formularioEditarCategoria.setValue({descripcion:e.descripcion,tipo:e.tipo})})})}editarCategoria(){this.baseDatosServicio.actualizar("categorias",{id:this.idCategoria,descripcion:this.formularioEditarCategoria.value.descripcion,tipo:this.formularioEditarCategoria.value.tipo}).then(()=>{this.router.navigate(["/periodista/administrar-categorias"]),d().fire("Editar categor\xeda completado!","Se ha editado correctamente la categor\xeda","success")}).catch(e=>{console.error("Error al editar la categor\xeda:",e),d().fire("Error","Ocurri\xf3 un error al editar la categor\xeda","error")})}logOut(){this.auth.logout()}static#r=this.\u0275fac=function(e){return new(e||i)(r.Y36(s.gz),r.Y36(m.g),r.Y36(a.qu),r.Y36(s.F0),r.Y36(f.e))};static#t=this.\u0275cmp=r.Xpm({type:i,selectors:[["app-editar-categoria"]],decls:26,vars:1,consts:[[1,"bg-gray-50","dark:bg-gray-900","h-screen","text-white"],[1,"flex","justify-between","pt-4","pl-10"],[1,"justify-center","flex"],[1,"h-auto","text-3xl","text-gray-900","dark:text-gray-50"],[1,"flex","justify-end","py-2","pr-5","gap-5"],["routerLink","/periodista/administrar-categorias",1,"w-32","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800"],[1,"w-28","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",3,"click"],[1,"custom-form",2,"padding-top","5%",3,"formGroup","ngSubmit"],[1,"flex","flex-col","items-center","justify-center","px-6","pt-8","mx-auto","lg:py-0"],[1,"w-full","bg-white","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"space-y-4","md:space-y-6"],["for","tipo",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","tipo","id","tipo","formControlName","tipo","placeholder","Tipo","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","descripcion",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","descripcion","id","descripcion","formControlName","descripcion","placeholder","Descripci\xf3n","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit",1,"w-full","text-white","bg-blue-600","hover:bg-blue-700","focus:ring-4","focus:outline-none","focus:ring-primary-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-primary-800"]],template:function(e,o){1&e&&(r.TgZ(0,"main",0)(1,"div",1)(2,"div",2)(3,"h2",3),r._uU(4,"Editar Categor\xeda"),r.qZA()(),r.TgZ(5,"div",4)(6,"a",5),r._uU(7,"Volver"),r.qZA(),r.TgZ(8,"button",6),r.NdJ("click",function(){return o.logOut()}),r._uU(9,"Salir"),r.qZA()()(),r._UZ(10,"hr"),r.TgZ(11,"form",7),r.NdJ("ngSubmit",function(){return o.editarCategoria()}),r.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div")(17,"label",12),r._uU(18,"Tipo"),r.qZA(),r._UZ(19,"input",13),r.qZA(),r.TgZ(20,"div")(21,"label",14),r._uU(22,"Descripci\xf3n"),r.qZA(),r._UZ(23,"input",15),r.qZA(),r.TgZ(24,"button",16),r._uU(25," Guardar Cambios "),r.qZA()()()()()()()),2&e&&(r.xp6(11),r.Q6J("formGroup",o.formularioEditarCategoria))},dependencies:[s.rH,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u]})}return i})();function J(i,u){if(1&i&&(r.TgZ(0,"td",19)(1,"a",22),r._uU(2," Editar "),r.qZA()()),2&i){const t=r.oxw().$implicit;r.xp6(1),r.MGl("routerLink","/periodista/editar-noticia/",t.id,"")}}function Y(i,u){1&i&&(r.TgZ(0,"td",19),r._uU(1," X "),r.qZA())}function D(i,u){if(1&i){const t=r.EpF();r.TgZ(0,"td",19)(1,"button",23),r.NdJ("click",function(){r.CHM(t);const o=r.oxw().$implicit,n=r.oxw(2);return r.KtG(n.eliminarNoticia(o.id))}),r._uU(2," Eliminar "),r.qZA()()}}function S(i,u){if(1&i&&(r.TgZ(0,"tr",17)(1,"th",18),r._uU(2),r.qZA(),r.TgZ(3,"td",19),r._uU(4),r.qZA(),r.TgZ(5,"td",19),r._uU(6),r.qZA(),r.YNc(7,J,3,1,"td",20),r.YNc(8,Y,2,0,"ng-template",null,21,r.W1O),r.YNc(10,D,3,0,"td",20),r.qZA()),2&i){const t=u.$implicit,e=r.MAs(9),o=r.oxw(2);r.xp6(2),r.Oqu(t.titulo),r.xp6(2),r.Oqu(t.autor),r.xp6(2),r.Oqu(t.categoria),r.xp6(1),r.Q6J("ngIf",(null==o.usuarioActual?null:o.usuarioActual.id)==t.idAutor||"Admin"==(null==o.usuarioActual?null:o.usuarioActual.rol))("ngIfElse",e),r.xp6(3),r.Q6J("ngIf",(null==o.usuarioActual?null:o.usuarioActual.id)==t.idAutor||"Admin"==(null==o.usuarioActual?null:o.usuarioActual.rol))("ngIfElse",e)}}function j(i,u){if(1&i&&(r.TgZ(0,"table",13)(1,"thead",14)(2,"tr")(3,"th",15),r._uU(4,"T\xedtulo"),r.qZA(),r.TgZ(5,"th",15),r._uU(6,"Autor"),r.qZA(),r.TgZ(7,"th",15),r._uU(8,"Categor\xeda"),r.qZA(),r.TgZ(9,"th",15),r._uU(10,"Editar"),r.qZA(),r.TgZ(11,"th",15),r._uU(12,"Eliminar"),r.qZA()()(),r.TgZ(13,"tbody"),r.YNc(14,S,11,7,"tr",16),r.qZA()()),2&i){const t=r.oxw();r.xp6(14),r.Q6J("ngForOf",t.noticias)}}function L(i,u){if(1&i&&(r.TgZ(0,"option",23),r._uU(1),r.qZA()),2&i){const t=u.$implicit;r.Q6J("value",t.tipo),r.xp6(1),r.Oqu(t.tipo)}}const G=[{path:"",component:k,children:[{path:"crear-noticia/:id",component:A,canActivate:[b]},{path:"administrar-categorias",component:I,canActivate:[b]},{path:"administrar-noticias",component:(()=>{class i{constructor(t,e,o){this.auth=t,this.baseDatos=e,this.router=o,this.noticias=[]}ngOnInit(){this.emailUsuarioActual=this.auth.obtenerUsuarioActual()?.email,this.usuarioActual||(console.log("Desde la bd"),this.baseDatos.obtenerPorFiltro("usuarios","email",this.emailUsuarioActual).subscribe(t=>{this.usuarioActual=t[0]})),this.obtenerNoticias()}obtenerNoticias(){this.baseDatos.obtenerTodos("noticias").subscribe(t=>{this.noticias=t})}eliminarNoticia(t){this.baseDatos.eliminar("noticias",t).then(()=>{this.noticias=this.noticias.filter(e=>e.id!==t),d().fire("Noticia eliminada","","success")}).catch(e=>{console.error("Error al eliminar la noticia:",e),d().fire("Error","Ocurri\xf3 un error al eliminar la noticia","error")})}logOut(){this.auth.logout()}static#r=this.\u0275fac=function(e){return new(e||i)(r.Y36(f.e),r.Y36(m.g),r.Y36(s.F0))};static#t=this.\u0275cmp=r.Xpm({type:i,selectors:[["app-administrar-noticias"]],decls:20,vars:3,consts:[[1,"bg-gray-50","dark:bg-gray-900","h-screen","text-white"],[1,"flex","justify-between","pt-4","pl-10"],[1,"justify-center","flex"],[1,"h-auto","text-3xl","text-gray-900","dark:text-gray-50"],[1,"flex","justify-end","py-2","pr-5","gap-5"],[1,"w-32","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",3,"routerLink"],[1,"w-28","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",3,"click"],[1,"py-4","mt-5","flex","justify-center"],[1,"card","bg-transparent"],[1,"card-header","mb-5","flex","justify-between"],[1,"bg-transparent","hover:bg-white-500","text-white-700","font-semibold","hover:text-white","py-2","px-4","border","border-blue-500","hover:border-transparent","rounded",3,"routerLink"],[1,"relative","overflow-x-auto"],["class","w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",4,"ngIf"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b dark:bg-gray-800 dark:border-gray-700",4,"ngFor","ngForOf"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-4"],["class","px-6 py-4",4,"ngIf","ngIfElse"],["noEditar",""],[1,"btn","buttonPrincipal",3,"routerLink"],[1,"btn","btn-danger",3,"click"]],template:function(e,o){1&e&&(r.TgZ(0,"main",0)(1,"div",1)(2,"div",2)(3,"h2",3),r._uU(4,"Panel Periodista Noticias"),r.qZA()(),r.TgZ(5,"div",4)(6,"a",5),r._uU(7,"Volver"),r.qZA(),r.TgZ(8,"button",6),r.NdJ("click",function(){return o.logOut()}),r._uU(9,"Salir"),r.qZA()()(),r._UZ(10,"hr"),r.TgZ(11,"div",7)(12,"div",8)(13,"div",9)(14,"h3"),r._uU(15,"Listado de noticias"),r.qZA(),r.TgZ(16,"a",10),r._uU(17,"Crear Noticia"),r.qZA()(),r.TgZ(18,"div",11),r.YNc(19,j,15,1,"table",12),r.qZA()()()()),2&e&&(r.xp6(6),r.MGl("routerLink","/periodista/crear-noticia/",null==o.usuarioActual?null:o.usuarioActual.id,""),r.xp6(10),r.MGl("routerLink","/periodista/crear-noticia/",null==o.usuarioActual?null:o.usuarioActual.id,""),r.xp6(3),r.Q6J("ngIf",o.noticias.length>0))},dependencies:[p.sg,p.O5,s.rH]})}return i})(),canActivate:[b]},{path:"editar-noticia/:id",component:(()=>{class i{constructor(t,e,o,n,l,g){this.route=t,this.baseDatosServicio=e,this.formBuilder=o,this.router=n,this.categoriasServicio=l,this.auth=g,this.categorias=[],this.formularioEditarNoticia=this.formBuilder.group({titulo:["",a.kI.required],cuerpo:["",a.kI.required],autor:["",a.kI.required],categoria:["",a.kI.required]})}ngOnInit(){this.obtenerCategorias(),this.route.params.subscribe(t=>{this.idNoticia=t.id}),void 0!==this.idNoticia&&this.baseDatosServicio.obtenerPorId("noticias",this.idNoticia).subscribe(t=>{this.noticia=t,this.formularioEditarNoticia.setValue({titulo:t.titulo,cuerpo:t.cuerpo,autor:t.autor,categoria:t.categoria})})}obtenerCategorias(){this.categoriasServicio.obtenerTodasCategorias().subscribe(t=>{this.categorias=t},t=>{console.error("Error al obtener las categor\xedas:",t)})}editarNoticia(){this.baseDatosServicio.actualizar("noticias",{id:this.idNoticia,titulo:this.formularioEditarNoticia.value.titulo,cuerpo:this.formularioEditarNoticia.value.cuerpo,autor:this.formularioEditarNoticia.value.autor,categoria:this.formularioEditarNoticia.value.categoria}).then(()=>{this.router.navigate(["/periodista/administrar-noticias"]),d().fire("Editar noticia completado!","Se ha editado correctamente la noticia","success")}).catch(e=>{console.error("Error al editar la noticia:",e),d().fire("Error","Ocurri\xf3 un error al editar la noticia","error")})}logOut(){this.auth.logout()}static#r=this.\u0275fac=function(e){return new(e||i)(r.Y36(s.gz),r.Y36(m.g),r.Y36(a.qu),r.Y36(s.F0),r.Y36(y.g),r.Y36(f.e))};static#t=this.\u0275cmp=r.Xpm({type:i,selectors:[["app-editar-noticia"]],decls:37,vars:2,consts:[[1,"bg-gray-50","dark:bg-gray-900","h-screen","text-white"],[1,"flex","justify-between","pt-4","pl-10"],[1,"justify-center","flex"],[1,"h-auto","text-3xl","text-gray-900","dark:text-gray-50"],[1,"flex","justify-end","py-2","pr-5","gap-5"],["routerLink","/periodista/administrar-noticias",1,"w-32","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800"],[1,"w-28","text-white","bg-red-600","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-red-500","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",3,"click"],[1,"custom-form",2,"padding-top","5%",3,"formGroup","ngSubmit"],[1,"flex","flex-col","items-center","justify-center","px-6","pt-8","mx-auto","lg:py-0"],[1,"w-full","bg-white","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"space-y-4","md:space-y-6"],["for","titulo",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","titulo","id","titulo","formControlName","titulo","placeholder","T\xedtulo","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","cuerpo",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","cuerpo","id","cuerpo","formControlName","cuerpo","rows","5","placeholder","Cuerpo","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","autor",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","autor","id","autor","formControlName","autor","placeholder","Autor","required","","readonly","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","categoria",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","categoria","id","categoria","formControlName","categoria","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"w-full","text-white","bg-blue-600","hover:bg-blue-700","focus:ring-4","focus:outline-none","focus:ring-primary-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-primary-800"],[3,"value"]],template:function(e,o){1&e&&(r.TgZ(0,"main",0)(1,"div",1)(2,"div",2)(3,"h2",3),r._uU(4,"Editar Noticia"),r.qZA()(),r.TgZ(5,"div",4)(6,"a",5),r._uU(7,"Volver"),r.qZA(),r.TgZ(8,"button",6),r.NdJ("click",function(){return o.logOut()}),r._uU(9,"Salir"),r.qZA()()(),r._UZ(10,"hr"),r.TgZ(11,"form",7),r.NdJ("ngSubmit",function(){return o.editarNoticia()}),r.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div")(17,"label",12),r._uU(18,"T\xedtulo"),r.qZA(),r._UZ(19,"input",13),r.qZA(),r.TgZ(20,"div")(21,"label",14),r._uU(22,"Cuerpo"),r.qZA(),r._UZ(23,"textarea",15),r.qZA(),r.TgZ(24,"div")(25,"label",16),r._uU(26,"Autor"),r.qZA(),r._UZ(27,"input",17),r.qZA(),r.TgZ(28,"div")(29,"label",18),r._uU(30,"Categor\xeda"),r.qZA(),r.TgZ(31,"select",19)(32,"option",20),r._uU(33,"Seleccionar categor\xeda"),r.qZA(),r.YNc(34,L,2,2,"option",21),r.qZA()(),r.TgZ(35,"button",22),r._uU(36," Guardar Cambios "),r.qZA()()()()()()()),2&e&&(r.xp6(11),r.Q6J("formGroup",o.formularioEditarNoticia),r.xp6(23),r.Q6J("ngForOf",o.categorias))},dependencies:[p.sg,s.rH,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.sg,a.u]})}return i})(),canActivate:[b]},{path:"editar-categoria/:id",component:O,canActivate:[b]},{path:"crear-categoria",component:T,canActivate:[b]}]}];let Q=(()=>{class i{static#r=this.\u0275fac=function(e){return new(e||i)};static#t=this.\u0275mod=r.oAB({type:i});static#e=this.\u0275inj=r.cJS({imports:[s.Bz.forChild(G),s.Bz]})}return i})(),M=(()=>{class i{static#r=this.\u0275fac=function(e){return new(e||i)};static#t=this.\u0275mod=r.oAB({type:i});static#e=this.\u0275inj=r.cJS({imports:[p.ez,Q,a.UX]})}return i})()}}]);